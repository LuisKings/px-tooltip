sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
env:
  global:
  - secure: etnPgAp5hzb5ca8DwZQfmOU7UDMx3MWA8XMBUFDP/qctdD1pmOID4The+l/TSgZ5yb8f1aW2e8N4UcJI4ISULdNdxnmp+aE6/uEsDyNjpuuhUilSps8DzRjnmmj0WNWEUwBmLBxutrjMffEKdTbrT6a10M5UimQOTxhab5/BzJSa8JO+CvN/kMcFFMcMJM7wZjK33AulvOkeGSTLB7HlshNB+4JQ4uHq2IExOepA6Imd/iiqLc8Zfn+ifQj8epkvDLZNnFwQNMbVsst/STg+DQq9ZEDqKfdWt+AfioIuwhEARnxjrP6T8wxGCVcxvM1bkLS2kuxx+WQfJFWjxPIBeek1VB6CtrrwT4hoApsYezooEHxCVzywiOFaaqVNWo810RxYYI+2dpF9L5L5nP0v8lU5uFbcuczwzZA/aS8QJxExIUM4AKkBJml/fpPBbGxAZOsBMsMKurMMCNlC6e5ajz+oL4OKTAN+p6NwhNM4xD5ICTahalQQYUJLcuNPW3tqhvG+XlkjOf3ZaaLICM1K4+X5J6QRKtihya0GW3hkc+Qm3agyBH2mRqsJY/pynE9Yv1MgHOIvd7nFv6aY1Xx7UW7Hd9WJeHxkSPGZy2TNDdCHdQ8sbt5BWQ4sM+bt8cQcTGiSTd4sQR5JAq4PtJ/VuAACVs7DlEtSYnK2LfgmBG0=
  - secure: vWElaOYTFpI5gribGbY9cTyMRzxu0B7LQFaSj3TvIyfGLbNHBWiX1TSjEibjPsrxKtG+7Id8grCJH7sm+Roax2+fpOvF7d8EsTQ5NqRbwjayOaiF2XvKiRRfK6XcD4oeIdsUmGRAFI6JYvt3X0TwFm6KarEVOjvq1AplppSIJkFTcFeBnlTF5QJJsm91WrtIYeIR4P9yhUtJ4KHMy9T2IXSE9kGGSx6x8PSkiYl1Fs5pNWcPaB56rkcUMpumkkmY5BtbDmv9kziFhOUTiKARGic4Y1uo5nBWg09xGw5Zcqo1SYNFWxCMEnhn4sbz8mLnPn/pDsQlS9kcestfCH91BiPO4EeFuD+plezT0cyDPpBP/1zLpdjpSlUmjkNIm4YziR1nFqke7AnwSVzyuh5aObXP6wh4U7+xP6Xs2w8eHTiD6btIvtaOag37F9t6T6nMn8qwjDfyEMVKQCPSX35/HAKw46wCB3FyBqzdTHtKL3jpQKFW/LPiGf3ZxaAwojOWl1C38AltjxOYujPzu0KqgBXl4f7ySVo1gVg34K5MXBB69em6DkSurynivg3A/++S/Xxg2BJT8+jXJDyv3A3Np+QYIP/f+7a02rlQJkz/c97nGG7WOwJl0yZXbfAu3yOGYcvA6zOnRSm1aNRfUCqMQlLEv6yFSkNS1skx+EXrySQ=
